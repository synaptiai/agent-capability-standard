meta:
  world_id: example:payments-service
  as_of: '2026-01-24T00:00:00Z'
  timezone: Europe/Oslo
  scope: digital system
  owner: team-platform
  notes: Example snapshot for digital twin demo.
entities:
- id: svc:payments-api
  type: service
  labels:
  - payments
  - api
  aliases:
  - payments-service
  - pay-api
  attributes:
    language: python
    runtime: uvicorn
  status: healthy
  provenance:
  - claim_id: c1
    created_at: '2026-01-24T00:00:00Z'
    agent: world-state
    capability: inspect
    anchors:
    - ref: file:services/payments/README.md:12
      kind: file
    transformations:
    - parsed service metadata from repo docs
    assumptions:
    - repo docs reflect deployed reality
  uncertainty:
    type: mixed
    confidence: 0.75
    notes: deployment drift possible
relationships:
- src:
    entity_id: svc:payments-api
    entity_type: service
  dst:
    entity_id: db:postgres-main
    entity_type: database
  relation: depends_on
  attributes:
    criticality: high
  uncertainty:
    type: epistemic
    confidence: 0.7
    notes: dependency inferred from config
  provenance:
  - claim_id: c2
    created_at: '2026-01-24T00:00:00Z'
    agent: map-relationships
    capability: search
    anchors:
    - ref: file:services/payments/config.yaml:5
      kind: file
state_variables:
- name: error_rate_5m
  subject:
    entity_id: svc:payments-api
    entity_type: service
  value:
    value: 0.004
    unit: ratio
    uncertainty:
      type: aleatoric
      confidence: 0.9
      interval:
        low: 0.003
        high: 0.006
  timestamp: '2026-01-24T00:00:00Z'
  source: observation
  valid_for: PT5M
  provenance:
  - claim_id: c3
    created_at: '2026-01-24T00:00:00Z'
    agent: inspect
    capability: inspect
    anchors:
    - ref: log:prometheus/query:error_rate_5m
      kind: log
  tags:
  - slo
  - monitoring
observations:
- event_id: evt-001
  timestamp: '2026-01-24T00:00:00Z'
  source: log
  payload:
    message: HTTP 500 spike detected
  anchors:
  - ref: log:grafana/panel/500s
    kind: log
  parsed_as:
  - anomaly_detected
  uncertainty:
    type: mixed
    confidence: 0.85
transition_rules:
- rule_id: tr-err-spike
  trigger:
    event_type: anomaly_detected
    match:
      message_contains: '500'
  guards:
  - error_rate_5m > 0.01
  effects:
  - set status=degraded for svc:payments-api
  - increase alert_level=high
  allowed_next_states:
  - healthy
  - degraded
  - down
  rollback:
    strategy: set_previous_status
    inverse_effects:
    - restore prior status
  provenance:
  - claim_id: c4
    created_at: '2026-01-24T00:00:00Z'
    agent: state-transition
    capability: state-transition
    anchors:
    - ref: human_note:runbook/alerts
      kind: human_note
actions:
- action_id: a-001
  timestamp: '2026-01-24T00:00:00Z'
  actor: agent
  intent: propose rollback to previous deployment
  status: planned
  plan_ref: plan:rollback-2026-01-24
  changes:
  - git revert <sha>
  verification:
  - run smoke tests
  anchors:
  - ref: tool:git/status
    kind: tool
indexes:
  by_entity:
    svc:payments-api:
      state_variables:
      - error_rate_5m
      relationships:
      - 0
  by_variable:
    error_rate_5m:
    - 0
  by_time:
    '2026-01-24T00:00:00Z':
      observations:
      - 0
      state_variables:
      - 0
